<header class="bg-white border-b border-slate-200 sticky top-0 z-50">
  <nav class="container mx-auto px-4 lg:px-8" x-data="{ isOpen: false, dropdownOpen: false }" @keydown.escape="isOpen = false; dropdownOpen = false">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-3 group">
        <img
          src="{{ settings.logoUrl }}"
          alt="{{ settings.logoAlt }}"
          width="60"
          height="60"
          class="transition-transform group-hover:scale-105"
        />
        <span class="text-2xl site-title text-slate-800 hidden sm:block">
          {{ settings.siteName }}
        </span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-1">
        {% if navigation.items %}
          {% for item in navigation.items %}
            {% if item.dropdown %}
              <!-- Dropdown Menu -->
              <div class="relative" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
                <button
                  @click="open = !open"
                  class="px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg font-medium transition-colors inline-flex items-center"
                >
                  {{ item.text }}
                  <svg class="w-4 h-4 ml-1 transition-transform" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </button>

                <!-- Dropdown Panel -->
                <div
                  x-show="open"
                  x-transition:enter="transition ease-out duration-200"
                  x-transition:enter-start="opacity-0 translate-y-1"
                  x-transition:enter-end="opacity-100 translate-y-0"
                  x-transition:leave="transition ease-in duration-150"
                  x-transition:leave-start="opacity-100 translate-y-0"
                  x-transition:leave-end="opacity-0 translate-y-1"
                  class="absolute left-0 mt-1 w-56 bg-white rounded-xl shadow-lg border border-slate-200 py-2 z-50"
                  x-cloak
                >
                  {% for child in item.children %}
                    <a
                      href="{{ child.url }}"
                      class="block px-4 py-2 text-sm text-slate-600 hover:text-slate-900 hover:bg-slate-50 transition-colors"
                    >
                      {{ child.text }}
                    </a>
                  {% endfor %}
                </div>
              </div>
            {% else %}
              <!-- Regular Link -->
              <a
                href="{{ item.url }}"
                class="px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg font-medium transition-colors"
              >
                {{ item.text }}
              </a>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>

      <!-- Mobile Menu Button -->
      <button
        @click="isOpen = !isOpen"
        type="button"
        class="lg:hidden p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors"
        aria-label="Toggle menu"
      >
        <svg x-show="!isOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <svg x-show="isOpen" x-cloak class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div
      x-show="isOpen"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 -translate-y-1"
      x-transition:enter-end="opacity-100 translate-y-0"
      x-transition:leave="transition ease-in duration-150"
      x-transition:leave-start="opacity-100 translate-y-0"
      x-transition:leave-end="opacity-0 -translate-y-1"
      x-cloak
      class="lg:hidden py-4 border-t border-slate-200"
    >
      {% if navigation.items %}
        {% for item in navigation.items %}
          {% if item.dropdown %}
            <!-- Mobile Dropdown -->
            <div x-data="{ mobileDropdown: false }">
              <button
                @click="mobileDropdown = !mobileDropdown"
                class="w-full flex items-center justify-between py-3 px-4 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg font-medium transition-colors"
              >
                {{ item.text }}
                <svg class="w-4 h-4 transition-transform" :class="{ 'rotate-180': mobileDropdown }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
              </button>

              <div
                x-show="mobileDropdown"
                x-transition
                class="pl-4 py-2 space-y-1"
                x-cloak
              >
                {% for child in item.children %}
                  <a
                    @click="isOpen = false"
                    href="{{ child.url }}"
                    class="block py-2 px-4 text-sm text-slate-500 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors"
                  >
                    {{ child.text }}
                  </a>
                {% endfor %}
              </div>
            </div>
          {% else %}
            <!-- Mobile Regular Link -->
            <a
              @click="isOpen = false"
              href="{{ item.url }}"
              class="block py-3 px-4 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg font-medium transition-colors"
            >
              {{ item.text }}
            </a>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </nav>
</header>
